<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Actilab ‚Äì Klassenspiel</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="global-header">
    <div class="global-header-inner">
      <label class="theme-switch" title="Helles Design aktivieren">
        <input
          id="theme-toggle"
          type="checkbox"
          role="switch"
          aria-label="Design umschalten"
          aria-checked="false"
        />
        <span class="theme-switch-track" aria-hidden="true">
          <span class="theme-switch-thumb"></span>
        </span>
      </label>
      <button
        id="qr-toggle"
        class="icon-button"
        type="button"
        aria-label="QR-Code f√ºr diese Seite √∂ffnen"
        title="QR-Code anzeigen"
      >
        <svg class="qr-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <rect x="3" y="3" width="6" height="6" rx="1"></rect>
          <rect x="5" y="5" width="2" height="2"></rect>
          <rect x="15" y="3" width="6" height="6" rx="1"></rect>
          <rect x="17" y="5" width="2" height="2"></rect>
          <rect x="3" y="15" width="6" height="6" rx="1"></rect>
          <rect x="5" y="17" width="2" height="2"></rect>
          <rect x="12" y="12" width="2" height="2"></rect>
          <rect x="15" y="12" width="2" height="2"></rect>
          <rect x="18" y="12" width="3" height="2"></rect>
          <rect x="12" y="15" width="2" height="2"></rect>
          <rect x="15" y="15" width="6" height="2"></rect>
          <rect x="12" y="18" width="4" height="3"></rect>
          <rect x="18" y="18" width="3" height="3"></rect>
        </svg>
      </button>
      <button
        id="fullscreen-toggle"
        class="icon-button"
        type="button"
        aria-label="Vollbildmodus umschalten"
        aria-pressed="false"
        title="Vollbildmodus"
      >
        ‚õ∂
      </button>
    </div>
  </header>

  <div class="app">

    <main>
      <section id="landing" class="panel panel--active landing" aria-label="Landing Page" aria-hidden="false">
        <div class="landing-content">
          <img
            class="landing-logo"
            src="data/Logo de Thinkaroo avec kangourou.png"
            alt="Logo de Thinkaroo mit K√§nguru"
          />
          <img
            id="landing-qr"
            class="landing-qr"
            src=""
            alt="QR-Code zur Website des Spiels"
          />
        </div>
        <footer class="landing-footer">
          <button id="landing-start" class="primary landing-start-button" type="button">Spiel starten</button>
        </footer>
      </section>

      <section id="menu" class="panel" aria-label="Hauptmen√º" aria-hidden="true" hidden>
        <div class="panel-grid">
          <div class="card-stack">
            <div class="card card--teams">
              <h2>Teams</h2>
              <div class="field">
                <div class="team-count-control" role="group" aria-label="Anzahl Teams">
                  <button type="button" class="count-button" id="team-count-decrease" aria-label="Teamanzahl verringern">
                    ‚Äì
                  </button>
                  <input id="team-count" type="number" min="2" max="4" step="1" value="2" />
                  <button type="button" class="count-button" id="team-count-increase" aria-label="Teamanzahl erh√∂hen">
                    +
                  </button>
                </div>
              </div>
              <div id="team-list" class="team-list"></div>
            </div>
            <div class="card">
              <h2>Spiell√§nge</h2>
              <label class="field">
                <select id="board-size-select">
                  <option value="short">Kurzes Spiel ¬∑ 24 Felder (6 √ó 4)</option>
                  <option value="normal" selected>Normales Spiel ¬∑ 30 Felder (6 √ó 5)</option>
                  <option value="long">Langes Spiel ¬∑ 42 Felder (7 √ó 6)</option>
                </select>
              </label>
            </div>
          </div>

          <div class="card" id="menu-settings-card">
            <h2>Spieleinstellungen</h2>
            <div class="field-group category-settings">
              <div class="category-settings-head" aria-hidden="true">
                <span>Kategorie</span>
                <span>Zeit pro Runde</span>
              </div>
              <div class="category-setting">
                <label class="category-toggle">
                  <input type="checkbox" id="category-explain" value="Erkl√§ren" checked />
                  Erkl√§ren
                </label>
                <div class="category-time">
                  <select id="time-explain" aria-label="Zeit pro Runde f√ºr Erkl√§ren"></select>
                </div>
              </div>
              <div class="category-setting">
                <label class="category-toggle">
                  <input type="checkbox" id="category-draw" value="Zeichnen" checked />
                  Zeichnen
                </label>
                <div class="category-time">
                  <select id="time-draw" aria-label="Zeit pro Runde f√ºr Zeichnen"></select>
                </div>
              </div>
              <div class="category-setting">
                <label class="category-toggle">
                  <input type="checkbox" id="category-pantomime" value="Pantomime" checked />
                  Pantomime
                </label>
                <div class="category-time">
                  <select id="time-pantomime" aria-label="Zeit pro Runde f√ºr Pantomime"></select>
                </div>
              </div>
              <div class="category-setting">
                <label class="category-toggle">
                  <input type="checkbox" id="category-quiz" value="Quizfrage" checked />
                  Quizfrage
                </label>
                <div class="category-time">
                  <select id="time-quiz" aria-label="Zeit pro Runde f√ºr Quizfrage"></select>
                </div>
              </div>
            </div>
            <label class="field">
              Strafzeit beim Tauschen
              <select id="swap-select">
                <option value="5">5s</option>
                <option value="10" selected>10s</option>
                <option value="15">15s</option>
              </select>
            </label>
          </div>

          <div class="card-stack">
            <div class="card">
              <div class="card-row">
              <h2>Kartensatz</h2>
              <button class="info-button" id="csv-info" aria-label="CSV Info">i</button>
            </div>
              <div class="field">
                Kartensatz ausw√§hlen
                <div id="dataset-select-list" class="dataset-select-list" aria-live="polite"></div>
                <button id="dataset-add" class="dataset-add-button" type="button" aria-label="Weiteren Kartensatz hinzuf√ºgen" hidden>+</button>
              </div>
              <div class="field">
                Kartenset aus Storage laden
                <select id="storage-dataset-select" aria-label="Kartenset aus Storage laden">
                  <option value="">Lade Kartensets ...</option>
                </select>
              </div>
              <label class="field upload">
                CSV Upload
                <input id="csv-upload" type="file" accept=".csv,text/csv" />
              </label>
              <div class="field">
                <div class="dataset-upload-actions">
                  <button id="csv-upload-button" class="ghost" type="button">Hochladen</button>
                  <button id="csv-refresh-list" class="ghost" type="button">Dateiliste aktualisieren</button>
                </div>
              </div>
              <button id="open-card-editor" class="ghost" type="button">Karten bearbeiten</button>
              <p class="hint" id="csv-status" hidden>Lade Dateiliste ...</p>
              <div class="tooltip" id="csv-tooltip" role="dialog" aria-hidden="true">
                <h3>CSV-Upload Hinweise</h3>
                <ul>
                  <li>Nur Dateien mit Endung .csv und maximal 1 MB werden akzeptiert.</li>
                  <li>Dateinamen werden als UUID + Originalname gespeichert, damit nichts √ºberschrieben wird.</li>
                  <li>Alle hochgeladenen Dateien sind √∂ffentlich sichtbar und herunterladbar.</li>
                  <li>Der Karteneditor bleibt lokal f√ºr die Bearbeitung vorhandener Kartens√§tze nutzbar.</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <footer class="menu-footer">
          <button id="start-game" class="primary menu-start-button">Spiel starten</button>
        </footer>
      </section>

      <section id="game" class="panel" aria-label="Spielfeld" aria-hidden="true" hidden>
        <div class="game-top">
          <div class="board" id="board" aria-hidden="true"></div>
          <div id="dice-overlay" class="dice-overlay" aria-hidden="true">
            <div class="dice-overlay-die">
              <span class="dice-overlay-icon" aria-hidden="true">üé≤</span>
              <span id="dice-overlay-value" class="dice-overlay-value">1</span>
            </div>
          </div>
          <div id="status" class="status">W√ºrfeln, um zu starten.</div>
        </div>
        <div class="game-bottom" aria-label="Spielsteuerung">
          <div class="game-controls">
            <button id="roll" class="dice" aria-label="W√ºrfeln">üé≤</button>
            <button id="undo" class="ghost toolbar-button" aria-label="Zug zur√ºck">‚Ü©Ô∏è</button>
            <button id="open-settings" class="ghost toolbar-button" aria-label="Spieleinstellungen">‚öôÔ∏è</button>
            <button id="main-menu" class="ghost toolbar-button" aria-label="Hauptmen√º">üè†</button>
          </div>
        </div>
        <div id="settings-panel" class="settings-panel hidden" role="dialog" aria-modal="true" aria-label="Spieleinstellungen">
          <div class="settings-card">
            <div class="settings-header">
              <h2>Spieleinstellungen</h2>
              <button id="close-settings" class="ghost">Schlie√üen</button>
            </div>
            <div class="field-group category-settings">
              <p>Kategorien</p>
              <div class="category-settings-head" aria-hidden="true">
                <span>Kategorie</span>
                <span>Zeit pro Runde</span>
              </div>
              <div class="category-setting">
                <label class="category-toggle">
                  <input type="checkbox" id="category-explain-game" value="Erkl√§ren" checked />
                  Erkl√§ren
                </label>
                <div class="category-time">
                  <select id="time-explain-game" aria-label="Zeit pro Runde f√ºr Erkl√§ren"></select>
                </div>
              </div>
              <div class="category-setting">
                <label class="category-toggle">
                  <input type="checkbox" id="category-draw-game" value="Zeichnen" checked />
                  Zeichnen
                </label>
                <div class="category-time">
                  <select id="time-draw-game" aria-label="Zeit pro Runde f√ºr Zeichnen"></select>
                </div>
              </div>
              <div class="category-setting">
                <label class="category-toggle">
                  <input type="checkbox" id="category-pantomime-game" value="Pantomime" checked />
                  Pantomime
                </label>
                <div class="category-time">
                  <select id="time-pantomime-game" aria-label="Zeit pro Runde f√ºr Pantomime"></select>
                </div>
              </div>
              <div class="category-setting">
                <label class="category-toggle">
                  <input type="checkbox" id="category-quiz-game" value="Quizfrage" checked />
                  Quizfrage
                </label>
                <div class="category-time">
                  <select id="time-quiz-game" aria-label="Zeit pro Runde f√ºr Quizfrage"></select>
                </div>
              </div>
            </div>
            <label class="field">
              Strafzeit beim Tauschen
              <select id="swap-select-game">
                <option value="5">5s</option>
                <option value="10" selected>10s</option>
                <option value="15">15s</option>
              </select>
            </label>
            <label class="field">
              Spiell√§nge
              <select id="board-size-select-game">
                <option value="short">Kurzes Spiel ¬∑ 24 Felder (6 √ó 4)</option>
                <option value="normal" selected>Normales Spiel ¬∑ 30 Felder (6 √ó 5)</option>
                <option value="long">Langes Spiel ¬∑ 42 Felder (7 √ó 6)</option>
              </select>
            </label>
            <button id="apply-settings" class="primary">Einstellungen speichern</button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <div id="overlay" class="overlay hidden" aria-live="polite">
    <div class="overlay-content" id="overlay-content">üé≤</div>
  </div>

  <div id="qr-modal" class="qr-modal hidden" role="dialog" aria-modal="true" aria-label="QR-Code">
    <div class="qr-modal-card">
      <div class="qr-modal-header">
        <h2>QR-Code</h2>
        <button id="close-qr-modal" class="ghost" type="button">Schlie√üen</button>
      </div>
      <img id="qr-image" class="qr-modal-image" alt="QR-Code f√ºr diese Seite" loading="lazy" />
    </div>
  </div>

  <div id="card-editor-modal" class="card-editor-modal hidden" role="dialog" aria-modal="true" aria-label="Karteneditor">
    <div class="card-editor-card">
      <div class="card-editor-header">
        <h2>Karteneditor</h2>
        <button id="close-card-editor" class="ghost" type="button">Schlie√üen</button>
      </div>
      <div class="card-editor-table-wrap">
        <table class="card-editor-table">
          <thead>
            <tr>
              <th>Kategorie</th>
              <th>Begriff/Frage</th>
              <th>Antwort/Tabu1</th>
              <th>Tabu2</th>
              <th>Tabu3</th>
              <th>Tabu4</th>
              <th>Aktion</th>
            </tr>
          </thead>
          <tbody id="card-editor-body"></tbody>
        </table>
      </div>
      <div id="card-editor-errors" class="card-editor-errors hidden" aria-live="polite"></div>
      <div class="card-editor-actions">
        <div class="card-editor-actions-left">
          <button id="card-editor-add-row" class="ghost" type="button">+ Zeile</button>
          <button id="card-editor-save" class="primary" type="button">√úbernehmen</button>
          <button id="card-editor-export" class="ghost" type="button">Als CSV exportieren</button>
        </div>
        <div class="card-editor-actions-right">
          <input id="card-editor-dataset-label" type="text" placeholder="Name f√ºr neuen Kartensatz" />
          <button id="card-editor-save-new" class="ghost" type="button">Als neuen Kartensatz speichern</button>
          <select id="card-editor-dataset-select" aria-label="Eigenen Kartensatz ausw√§hlen"></select>
          <button id="card-editor-overwrite" class="ghost" type="button">Bestehenden Kartensatz √ºberschreiben</button>
          <button id="card-editor-delete" class="ghost" type="button">Kartensatz l√∂schen</button>
        </div>
      </div>
    </div>
  </div>

  <div id="turn-overlay" class="turn-overlay hidden" aria-live="polite">
    <div class="turn-overlay-panel" id="turn-overlay-panel">
      <div class="turn-category" id="turn-category">
        <div class="turn-category-icon" id="turn-category-icon">?</div>
        <h2 id="turn-category-label">Kategorie</h2>
        <button id="turn-ready" class="primary">Bereit</button>
      </div>
      <div class="turn-countdown-card hidden" id="turn-countdown-card">
        <h2>Start in</h2>
        <div class="turn-countdown" id="turn-countdown">3</div>
      </div>
      <div class="turn-word hidden" id="turn-word">
        <div class="turn-timer" id="turn-timer">00</div>
        <div class="turn-penalty" id="turn-penalty" aria-live="polite"></div>
        <h2 id="turn-word-title">Begriff</h2>
        <ul id="turn-taboo-list"></ul>
        <div class="turn-action-buttons" aria-label="Antwortoptionen">
          <button class="turn-action-button is-correct" id="turn-correct" aria-label="Begriff richtig erraten" title="Richtig">
            ‚úì
          </button>
          <button class="turn-action-button is-wrong" id="turn-wrong" aria-label="Begriff falsch beantwortet" title="Falsch">
            ‚úï
          </button>
          <button class="turn-action-button is-swap" id="turn-swap" aria-label="Begriff tauschen" title="Begriff tauschen">
            ‚ü≤
          </button>
        </div>
        <p id="turn-answer" class="turn-answer hidden"></p>
        <button id="turn-continue" class="primary">L√∂sen</button>
      </div>
    </div>
  </div>

  <div id="winner-screen" class="winner-screen hidden" aria-live="polite">
    <div class="winner-card">
      <div class="confetti" aria-hidden="true">
        <span></span><span></span><span></span><span></span><span></span>
        <span></span><span></span><span></span><span></span><span></span>
        <span></span><span></span><span></span><span></span><span></span>
      </div>
      <h2 id="winner-label">Team hat gewonnen</h2>
      <button id="winner-restart" class="ghost">Zur√ºck zum Men√º</button>
    </div>
  </div>

  <script src="data/allgemein.js"></script>
  <script src="data/kfz.js"></script>
  <script src="data/kfz_werkstoffe.js"></script>
  <script src="data/kfz_einfach.js"></script>
  <script src="data/geographie.js"></script>
  <script src="data/um_nachruesten_mk10.js"></script>
  <script src="data/mfm10_ish.js"></script>
  <script src="data/industriemechanik_allgemein.js"></script>
  <script src="data/tiefziehen.js"></script>
  <script src="data/gesellschaft_kunst_geo_sport_geschichte_mathe_grammatik.js"></script>
  <script src="data/druck_luftdruck_pneumatik_regelung_fertigungsmechanik.js"></script>
  <script src="data/mk11d.js"></script>
  <script src="app.js"></script>
</body>
</html>
